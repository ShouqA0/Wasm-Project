@{
    Layout = "_Layout"; 
    ViewData["Title"] = "تسجيل الدخول - وسم";
}

@section Styles {
    <link rel="stylesheet" href="~/css/login.css" asp-append-version="true" />
    <style>
        
        .glass-card {
            transition: none !important;
            transform: none !important;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            background: rgba(255, 255, 255, 0.03) !important;
            pointer-events: auto;
        }

            .glass-card:hover {
                transform: none !important;
                box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3) !important;
                border-color: rgba(255, 255, 255, 0.1) !important;
                background: rgba(255, 255, 255, 0.03) !important;
            }

        
        .pattern-grid-container {
            border: none !important;
            position: relative;
        }

        #patternSvg {
            display: block;
            overflow: visible;
            pointer-events: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

       
        #wasm-ai-assistant {
            z-index: 999999 !important;
            position: fixed !important;
        }

        #chat-window {
            z-index: 1000000 !important;
        }
    </style>
}


<div class="hero-section">
    <div class="animated-bg-overlay"></div>
    <div class="hero-content">
        <h1 class="reveal-text big-title">وَسْم</h1>
        <p class="reveal-text delay-1 large-p">كان الوسم شاهداً..</p>
        <p class="reveal-text delay-2 large-p">وعاد اليوم ليكون وثيقة</p>
        <p class="reveal-text delay-3 large-p">بين أثر الأمس وتقنية اليوم</p>
        <p class="reveal-text delay-4 large-p">نحفظ الهوية ونوثق الملكية</p>
    </div>
</div>


<div class="login-section-wrapper" id="loginSection">
    <div class="glass-card">
        <h2 id="typing-text" class="welcome-msg"></h2>

        <form asp-controller="Account" asp-action="Login" method="post">
            @Html.AntiForgeryToken()

            @if (ViewBag.Error != null)
            {
                <div class="alert alert-danger shadow-sm border-0 mb-4 animate__animated animate__shakeX"
                     style="background: rgba(231, 76, 60, 0.2); color: #ff6b6b; border-radius: 15px; text-align: right;">
                    @ViewBag.Error
                </div>
            }

            <div class="input-container">
                <label class="field-label">اسم المستخدم</label>
                <input type="text" placeholder="USERNAME" name="username" required autocomplete="off" />
            </div>

            <div class="pattern-auth-area">
                <label class="field-label">النمط المرئي</label>

                <div id="patternContainer" class="pattern-grid-container">
                    <div class="dots-grid">
                        @for (int i = 1; i <= 9; i++)
                        {
                            <div class="dot-node" data-index="@i"></div>
                        }
                    </div>
                    <svg class="pattern-svg" id="patternSvg"></svg>
                </div>

                <input type="hidden" name="VisualPatternHash" id="PatternData" />

                <div class="mt-2 text-end">
                    <a asp-controller="Account" asp-action="ForgotPattern" class="text-decoration-none" style="color: rgba(255,255,255,0.7); font-size: 0.85rem;">
                        نسيت النمط؟
                    </a>
                </div>
            </div>

            <div class="form-actions mt-4">
                <button type="submit" class="btn-glass-action mb-3 w-100">دخول</button>

                <div class="d-flex justify-content-center mb-3">
                    <a asp-controller="Account" asp-action="Register" class="new-user-link">
                        تسجيل مستخدم جديد
                    </a>
                </div>

                
                <div class="mt-3 text-center border-top pt-3" style="border-color: rgba(255,255,255,0.1) !important;">
                    <a asp-controller="Admin" asp-action="Login" class="admin-access text-decoration-none" style="font-size: 0.85rem; color: rgba(0, 210, 255, 0.8);">
                        دخول المسؤول 
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script src="~/js/login.js" asp-append-version="true"></script>
}